# Javascript高级程序设计

## 第1章 Javascript简介

JavaScript是一种专为与网页交互而设计的脚本语言，由下列三个不同部分组成：

- ECMAScript，由ECMA-262定义，提供核心语言功能；
- 文档对象模型（DOM），提供访问和操作网页内容的方法和接口；
- 浏览器对象模型（BOM），提供与浏览器交互的方法和接口。

JavaScript的这三个组成部分，在当前五个主要浏览器（IE、Firefox、Chrome、Safari和Opera）中都得到乐不同程度的支持。其中，所有浏览器对ECMAScript第3版的支持大体上都还不错，对ECMAScript5的支持程度越来越高，但对DOM的支持则彼此相差比较多。对已经正式纳入HTML5标准的BOM来说，尽管各浏览器都实现了某些众所周知的共同特性，但其他特性还是会因浏览器而异。

---
PS:文档对象模型（DOM）把整个页面映射为一个多层节点结构。类似目录树、树形图这种。可以利用DOM修改各个节点，是页面得到自己想要的效果。

---

## 第2章 在HTML中使用JavaScript

把JavaScript插入到HTML页面中要使用&lt;script&gt;元素。使用这个元素可以把JavaScript嵌入到HTML页面中，让脚本与标记混合在一起；也可以包含外部的JavaScript文件。注意：

- 在包含外部JavaScript文件时，必须将src属性设置为指向相应文件的URL。而这个文件既可以是与包含它的页面位于同一个服务器上的文件，也可以是其他任何域中的文件。
- 所有&lt;script&gt;元素都会按照它们在页面中出现的先后顺序依次被解析。再不使用defer和async属性的情况下，只有在解析完前面&lt;script&gt;元素中的代码之后，才会开始解析后面&lt;script&gt;元素中的代码。
- 由于浏览器会先解析完不使用defer属性的&lt;script&gt;元素中的代码，然后再解析后面的内容，所以一般把&lt;script&gt;元素放在页面最后，即主要内容后面，&lt;/body&gt;标签前面。
- 使用defer属性可以让脚本在文档完全呈现之后再执行。延迟脚本总是按照指定它们的顺序执行。
- 使用async属性可以表示当前脚本不必等待其他脚本，也不必阻塞文档呈现。不能保证异步脚本按照它们在页面中出现的顺序执行。

另外，使用&lt;noscript&gt;元素可以指定在不支持脚本的浏览器中显示的替代内容。但在启用了脚本的情况下，浏览器不会显示&lt;noscript&gt;元素中的任何内容。

---

---

## 第三章 基本概念

#### 语法

- 区分大小写：
    - ECMAScript中的一切（变量、函数名和操作符）都区分大小写。不能使用关键字作函数名，如：typeof，而typeOf可以。
- 标识符
    - 标识符就是指变量、函数、属性的名字，或者函数的参数。标识符按以下规则组合：
        - 第一个字符必须是一个字母、下划线（_）或一个美元符号（$）；
        - 其他字符可以是字母、下划线、美元符号或数字。
    - 按照惯例，ECMAScript标识符采用驼峰大小写格式，即第一个字母小写，剩下的每个单词的首字母大写，如：doSomethingGood。
    - 不能把关键字、保留字、true、false和null用作标识符。
- 注释  
    - 单行： // 注释内容
    - 多行： /* 注释内容 */
- 语句
    - ECMAscript中语句以一个分号结尾，不必需，但建议不省略，加上这个分号可以避免很多错误（例如不完整的输入），如果省略分号，则由解析器确定语句的结尾，代码性能低。
    - 在控制语句中使用代码块可以让编码意图更加清晰，而且也能降低修改代码时出错的几率。代码块以左花括号（ { ）开头，以右花括号（ } ）结尾

#### 关键字和保留字

ECMA-262 描述了一组具有特定用途的关键字，这些关键字可用于表示控制语句的开始或结束，或者用于执行特定操作等。按照规则，关键字也是语言保留的，不能用作标识符。以下就是 ECMAScript
的全部关键字（带 * 号上标的是第 5 版新增的关键字）：
```
break       do       instanceof  typeof
case        else     new         var
catch       finally  return      void
continue    for      switch      while
debugger*   function this        with
default     if       throw
delete      in       try
```
ECMA-262 还描述了另外一组不能用作标识符的保留字。尽管保留字在这门语言中还没有任何特定的用途，但它们有可能在将来被用作关键字。以下是 ECMA-262 第 3 版定义的全部保留字：
```
abstract enum       int       short
boolean  export     interface static
byte     extends    long      super
char     final      native    synchronized
class    float      package   throws
const    goto       private   transient
debugger implements protected volatile
double   import     public
```

#### 变量
ECMAScript 的变量是松散类型的，所谓松散类型就是可以用来保存任何类型的数据。换句话说，每个变量仅仅是一个用于保存值的占位符而已。定义变量时要使用 var 操作符（注意 var 是一个关键字），后跟变量名（即一个标识符），如下所示：
```
var message;
```
像这样未经过初始化的变量，会保存一个特殊的值—— undefined。
注意：用 var 操作符定义的变量将成为定义该变量的作用域中的局部变量。也就是说，如果在函数中使用 var 定义一个变量，那么这个变量在函数退出后就会被销毁。可在函数内部不使用var直接给一个变量赋值，i创建一个全局变量(不推荐)。

#### 数据类型

ECMAScript 中有 5 种简单数据类型（也称为基本数据类型）： Undefined 、 Null 、 Boolean 、 Number和 String 。还有 1种复杂数据类型—— Object ， Object 本质上是由一组无序的名值对组成的。ECMAScript不支持任何创建自定义类型的机制，而所有值最终都将是上述 6 种数据类型之一。由于 ECMAScript 数据类型具有动态性，因此的确没有再定义其他数据类型的必要了。

- typeof 操作符
    鉴于 ECMAScript 是松散类型的，因此需要有一种手段来检测给定变量的数据类型—— typeof 就是负责提供这方面信息的操作符。对一个值使用 typeof 操作符可能返回下列某个字符串：
    - "undefined" ——如果这个值未定义；
    - "boolean" ——如果这个值是布尔值；
    - "string" ——如果这个值是字符串；
    - "number" ——如果这个值是数值；
    - "object" ——如果这个值是对象或 null ；
    - "function" ——如果这个值是函数。
- Undefined 类型
    Undefined 类型只有一个值，即特殊的undefined 。在使用 var 声明变量但未对其加以初始化时，这个变量的值就是 undefined。
- Null 类型
    - Null 类型也是只有一个值的数据类型，值是 null。从逻辑角度来看， null 值表示一个空对象指针，使用 typeof 操作符检测 null 值时会返回 "object"。
    - 如果定义的变量准备在将来用于保存对象，那么最好将该变量初始化为 null 而不是其他值。这样一来，只要直接检查 null 值就可以知道相应的变量是否已经保存了一个对象的引用。
    - 实际上， undefined 值是派生自 null 值的。对它们的相等性测试要返回 true ：
    ```
    alert(null == undefined); //true
    ```
- Boolean 类型
    - 有两个字面值： true 和 false 。
    - 区分大小写的。也就是说， True 和 False（以及其他的混合大小写形式）都不是 Boolean 值，只是标识符。
    - Boolean 类型的字面值只有两个，但 ECMAScript 中所有类型的值都有与这两个 Boolean 值等价的值。要将一个值转换为其对应的 Boolean 值，可以调用转型函数 Boolean()。转换规则如下：
  
        | 数据类型  | 转换为true的值             | 转换为false的值 |
        | --------- | -------------------------- | --------------- |
        | Boolean   | true                       | false           |
        | String    | 任何非空字符串             | ""(空字符串)    |
        | Number    | 任何非零数字值(包括无穷大) | 0和NaN          |
        | Object    | 任何对象                   | null            |
        | Undefined | n/a                        | undefined       |

         n/a（或 N/A），是 not applicable的缩写，意思是“不适用”。
- Number类型

    Number 类型使用 IEEE754 格式来表示整数和浮点数值（浮点数值在某些语言中也被称为双精度数值）。为支持各种数值类型，ECMA-262 定义了不同的数值字面量格式。

    >- 十进制(直接在代码中输入)
    >- 八进制，第一位必须是零（0），然后是八进制数字序列（0～7）
    >- 十六进制，前两位必须是 0x，后跟任何十六进制数字（0～9 及 A～F）（字母 A～F可以大写，也可以小写）
   
    - 浮点数值
        - 数值中必须包含一个小数点，并且小数点后面必须至少有一位数字。
        - ECMASctipt 会将那些小数点后面带有 6 个零以上的浮点数值转换为以 e 表示法表示的数值（例如，0.0000003 会被转换成 3e7）。
        - 最高精度是 17 位小数，但在进行算术计算时其精确度远远不如整数。例如，0.1 加 0.2的结果不是 0.3，而0.30000000000000004(使用基于IEEE754 数值的浮点计算的通病)。
        - 永远不要测试某个特定的浮点数值。
    - 数值范围
    
        由于内存的限制，ECMAScript 能够表示的最小数值（5e-324）保存在 Number.MIN_VALUE 中,最大数值（1.7976931348623157e+308）保存在Number.MAX_VALUE 中。超出 JavaScript 数值范围的值,将被自动转换成特殊的 Infinity 值。Infinity 不是能够参与计算的数值。使用 isFinite() 函数,在参数位于最小与最大数值之间时会返回 true。

    - NaN

        即非数值（Not a Number）是一个特殊的数值,表示一个本来要返回数值的操作数未返回数值的情况（这样就不会抛出错误了）.其特点如下：
        - 任何涉及 NaN 的操作（例如 NaN /10）都会返回 NaN 
        -  NaN 与任何值都不相等，包括 NaN 本身

         isNaN() 函数，接收到一个值之后，会尝试将这个值转换为数值。某些不是数值的值会直接转换为数值，例如字符串 "10" 或 Boolean 值。而任何不能被转换为数值的值都会导致这个函数返回 true 。
    
    - 数值转换
  
        有 3 个函数可以把非数值转换为数值： Number() 、 parseInt() 和 parseFloat() 。转型函数 Number() 可以用于任何数据类型,另两个函数则专门用于把字符串转换成数值。  
        - Number() 函数的转换规则

            1. Boolean值:true 和 false 将分别被转换为 1 和 0
            2. 数字值:简单的传入和返回
            3. null值:返回 0
            4. undefined :返回 NaN
            5. 字符串:
    
                - 只包含数字:转换为十进制数值
                - 包含有效的浮点格式:转换为对应的浮点数值
                - 包含有效的十六进制格式:转换为相同大小的十进制整数值
                - 空:转换为 0
                - 包含除上述格式之外的字符:转换为 NaN
    
            6. 对象:调用对象的 valueOf() 方法，然后依照前面的规则转换返回的值。如果转换的结果是 NaN ，则调用对象的 toString() 方法，然后再次依照前面的规则转换返回的字符串值。
        -  parseInt() 函数。忽略字符串前面的空格，直至找到第一个非空格字符。
            1.  如果第一个字符不是数字字符或者负号， parseInt()就会返回 NaN
            2.  如果第一个字符是数字字符， parseInt() 会继续解析第二个字符，直到解析完所有后续字符或者遇到了一个非数字字符。  
            3.  能够识别出各种整数格式(十进制、八进制和十六进制数）。
        -  parseFloat()函数
            1. 从第一个字符（位置 0）开始解析每个字符。一直解析到字符串末尾，或者解析到遇见一个无效的浮点数字字符为止。(字符串中的第一个小数点是有效的，而第二个小数点就是无效的了，因此它后面的字符串将被忽略)   
            2. 始终都会忽略前导的零, 只解析十进制值,十六进制格式的字符串则始终会被转换成 0。

    - String 类型（p32）

#### 流控制语句

#### 函数

JavaScript的核心语言特性在ECMA-262中是以名为ECMAScript的伪语言的形式来定义的。ECMAScript中包含了所有基本的语法、操作符、数据类型以及完成基本的计算任务所必需的对象，但没有对取得输入和产生输出的机制作出规定。理解ECMAScript及其各种细节，是理解其在Web浏览器中的实现————JavaScript的关键。目前大多数实现所遵循的都是ECMA-262的第3版，但很多也已经着手开始实现第5版了。以下简要总结了ECMAScript中基本的要素。

- ECMAScript中的基本数据类型包括Undefined、Null、Boolean、Number和String。
- 与其他语言不同，ECMAScript没有为整数和浮点数值分别定义不同的数据类型，Number类型可以用于表示所有数值。
- ECMAScript中也有一种复杂的数据类型，即Object类型，该类型是这门语言中所有对象的基础类型。
- 严格模式为这门语言中容易出错的地方施加了限制。
- ECMAScript提供了很多与C及其他类C语言中相同的基本操作符，包括算数操作符、布尔操作符、关系操作符、相等操作符及赋值操作符等。
- ECMAScript从其他语言中借鉴了很多流控制语句，例如if语句、for语句和switch语句等。ECMAScript中的函数与其他语言中的函数有诸多不同之处。
- 无需指定函数的返回值，因为任何ECMAScript函数都可以在任何时候返回任何值。
- 实际上，未指定返回值的函数返回的是一个特殊的undefined值。
- ECMAScript中也没有函数签名的概念，因为其函数参数是以一个包含零或多个值的数组的形式传递的。
- 可以向ECMAScript函数传递任意数量的参数，并且可以通过arguments对象来访问这些参数。
- 由于不存在函数签名的特性，ECMAScript函数不能重载。

> 未整理部分不再整理，知识点过多，等我有钱，一定买一本，直接在书上做笔记，翻起来也方便。