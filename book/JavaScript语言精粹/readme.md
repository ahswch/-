# JavaScript语言精粹

## Chapter 1 精华

定义新方法

```javascript
Function.prototype.method = function (name, func) {
    this.prototype[name] = func;
    return this;
};
```

## Chapter 2 语法

- 空白（whitespace）
  - var 后的空格不能省略
  - 使用// 作代码注释
- 标识符（Names）：由一个字母开头，后选择性加一个或多个字母、数字或下划线（不能使用保留字）
  - 可用于语句、变量、参数、属性名、运算符和标记
- 数字（内部表示为64位浮点数）
  - 数字字面量有指数部分 值为e之前的数字与10的e之后数字次方相乘
  - 负数用前置运算符 - 加数字构成
  - NaN是一个数值，表示一个不能产生正常结果的运算结果。NaN不等于任何值包括自己。可以使用`isNaN(number)`检测NaN
  - Infinity表示所有大于`1.79769313486231570e+308`的值
  - 数字拥有方法 包含于js对象Math中
- 字符串：被包在一对单引号或双引号中，可包含0个或多个字符 `\`是转义字符
  - Unicode是一个16位的字符集 所以JavaScript中的所有字符都是16位的
  - JavaScript没有字符类型，要表示一个字符，只需创建仅包含一个字符的字符串即可
  - 转义字符用来把那些正常情况下不被允许的字符插入到字符串中，如反斜线、引号和控制字符
  - `\u`约定用来指定数字字符编码 `"A" === "\u0041"`
  - 字符串有一个length属性
  - 字符串是不可变的。一旦被创建，永远无法改变它。可以通过`+`运算符连接其他字符串来创建新字符串。两个包含着完全相同的字符且字符顺序也相同的字符串被认为是相同的字符串 `'c' + 'a' + 't' === 'cat' // true`
  - 字符串方法（具体见第八章）
- 语句（statement）
  - 一个编译单元包含一组可执行的语句。在Web浏览器中，每个`<script>`标签提供一个被编译且立即执行的编译单元，无链接器，js把它们一起抛到一个公共的全局名字空间中
  - var语句被用在函数内部时，它定义的是这个函数的私有变量
  - switch、while、for和do语句允许有一个可选的前置标签（label），它配合break语句来使用
  - 语句通常按照从上到下的顺序被执行。Javascript可以通过条件语句（if和switc）、循环语句（while、for和do）、强制跳转语句（break、return和throw）和函数调用来改变执行序列
  - 代码块是包在一对花括号中的一组语句，js中的代码块不会创建新的作用域，因此变量应该被定义在函数的头部，而不是在代码块中
  - if语句根据表达式的值改变程序流程。表达式的值为真时执行跟在其后的代码块，否则，执行可选的else分支
    - 下列值被当作假（false）
      - false
      - null
      - undefined
      - 空字符串`' '`
      - 数字0
      - 数字NaN
    - 其他所有的值都被当做真
  - switch语句
  - while语句
  - for语句
    - 常见形式：由3个可选从句控制（初始化从句、条件从句和增量从句）
    - for in语句 通常需要使用`object。hasOwnProperty(variable)`来确定这个属性名是该对象的成员还是来自于原型链
  - do语句
  - try语句执行一个代码块，并捕获该代码抛出的任何异常。catch从句定义一个新的变量variable来接受抛出的异常对象
  - throw语句抛出一个异常。如果throw语句在一个try代码块中，控制流就会跳转到catch从句中
    - 语句中的表达市场通常是一个对象字面量，它包含一个name属性和一个message属性。异常捕获器可以使用这些信息去决定该做什么
  - return语句会导致从函数中提前返回。它可以指定要被返回的值。如果没有指定返回表达式，返回值是undefined js不允许在return关键字和表达式之间换行
  - break语句会使程序退出一个循环语句或switch语句。他可以指定一个可选的标签，那退出的就是带标签的语句 js不允许在break关键字和标签之间换行
  - 一个expression语句可以给一个或多个变量或成员赋值，或者调用一个方法，或者从对象中删除一个属性。
- 表达式（expression）
  - 最简单的表达式是字面量值（比如字符串或数字）、变量、内置的值（false、true、null、undefined、NaN和Infinity）、以new开头的调用表达式、以delete开头的属性提取表达式、包在圆括号中的表达式、以一个前置运算符作为前导的表达式，或者表达式后面跟着：
    - 一个中置运算符与另一个表达式
    - 三元运算符 ? 后面跟着另一个表达式，然后接一个 : ，再然后接第三个表达式
    - 一个函数调用
    - 一个属性提取表达式
  - 运算符优先级

  |运算符|说明|
  |---|---|
  |. [] ( ) | 提取是属性与调用函数|
  |delete new typeof + - !|一元运算符|
  |* / %|乘法、除法、求余|
  |+ -|加法/连接、减法|
  |>= <= > <|不等式运算符|
  |=== !==|等式运算符|
  |&&|逻辑与|
  |\|\||逻辑或|
  |? :|三元|

  - typeof运算符产生的值有'number'、'string'、'undefined'、'boolean'、'function'和'object'（es5 新增'symbol'）
  - `+`运算符可以进行加法运算或字符串连接
  - `/`运算符可能会产生一个非整数结果，即使两个运算数都是整数
  - 如果第一个运算数的值为假，那么运算符`&&`产生它的第一个运算数的值，否则产生第二个运算数的值
  - 如果第一个运算数的值为真，那么运算符`||`产生它的第一个运算数的值，否则产生第二个运算数的值
  - 函数调用引发函数执行
- 字面量（Literals）
  - 对象字面量是一种可以方便地按制定规格创建新对象的表示法。属性名可以是标识符或字符串。这些名字被当做字面量名而不是变量名来对待，所以对象的属性名在编译时才能知道。属性的值就是表达式
  - 数组字面量是一种可以方便地按指定规格创建新数组的表示法。
- 函数
  - 函数字面量定义了函数值。它有一个可选的名字，用于递归的调用自己。也可以指定一个参数列表，这些参数就像变量一样，在调用时由传递的的实际参数（argument）初始化。
  - 函数主体包括变量定义和语句

## Chapter 3 对象

js的简单数据类型包括数字、字符串、布尔值、null值和undefined值。其他所有的值都是对象

- js中的对象是可变的键控集合（keyed collections）
- 对象是属性的容器，其中每个属性都拥有名字和值。属性的名字可以是包含空字符串在内的任意字符串。属性值可以是除undefined值之外的任何值
- js里的对象是无类型（class-free）的。它对新属性的名字和属性的值没有限制。对象适合用于汇集和管理数据。对象可以包含其他对象，所以它们可以吃容易地表示成树状或图形结构
- js包含一种原型链的特性，允许对象继承另一个对象的属性。正确地使用它能减少对象初始化消耗的时间和内存

### 对象字面量（Object Literals）

- 对象字面量提供了一种非常方便的创建对象值的表示法。一个对象字面量就是包围在一对花括号中的零个或多个“名/值”对。对象字面量可以出现在任何允许表达式出现的地方
- 属性名可以是包含空字符串在内的任何字符串。在对象字面量中，如果属性名是一个合法的js标识符且不是保留字，则并不强制要求用引号括住属性名。所以用引号括住`"first-name"`是必需的，但是否括住`first_name`则是可选的。逗号用来分隔多个“名/值”对
- 属性的值可以从包括另一个对象字面量在内的任意表达式中获得。对象是可嵌套的

### 检索（Retrieval）